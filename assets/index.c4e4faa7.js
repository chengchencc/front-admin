import{H as s,_ as h,a as V,ac as G,aH as ie,L as M,c7 as j,c8 as ae,V as le,c9 as ce,Q as he,R as Y,S as D,p,ai as de,T as H,ca as fe,ap as ue,aj as pe,J as R,K as me,$ as ve,cb as W,cc as ye,O as be,cd as we}from"./index.91c78518.js";var q={width:s.any,height:s.any,defaultOpen:s.looseBool,firstEnter:s.looseBool,open:s.looseBool,prefixCls:s.string,placement:s.string,level:s.oneOfType([s.string,s.array]),levelMove:s.oneOfType([s.number,s.func,s.array]),ease:s.string,duration:s.string,handler:s.any,showMask:s.looseBool,maskStyle:s.object,className:s.string,wrapStyle:s.object,maskClosable:s.looseBool,afterVisibleChange:s.func,keyboard:s.looseBool},ge=h(h({},q),{wrapperClassName:s.string,forceRender:s.looseBool,getContainer:s.oneOfType([s.string,s.func,s.object,s.looseBool])});h(h({},q),{getContainer:s.func,getOpenCount:s.func,switchScrollingEffect:s.func});function Ce(n){return Array.isArray(n)?n:[n]}var Z={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},J=Object.keys(Z).filter(function(n){if(typeof document=="undefined")return!1;var e=document.getElementsByTagName("html")[0];return n in(e?e.style:{})})[0],z=Z[J];function U(n,e,t,o){n.addEventListener?n.addEventListener(e,t,o):n.attachEvent&&n.attachEvent("on".concat(e),t)}function X(n,e,t,o){n.removeEventListener?n.removeEventListener(e,t,o):n.attachEvent&&n.detachEvent("on".concat(e),t)}function De(n,e){var t;return typeof n=="function"?t=n(e):t=n,Array.isArray(t)?t.length===2?t:[t[0],t[1]]:[t]}var K=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},Se=globalThis&&globalThis.__rest||function(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t};function $(){}var x={},N=!(typeof window!="undefined"&&window.document&&window.document.createElement),Oe=V({name:"Drawer",mixins:[G],inheritAttrs:!1,props:ie(ge,{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",firstEnter:!1,showMask:!0,handler:!0,maskStyle:{},wrapperClassName:""}),data:function(){this.levelDom=[],this.contentDom=null,this.maskDom=null,this.handlerdom=null,this.mousePos=null,this.sFirstEnter=this.firstEnter,this.timeout=null,this.children=null,this.dom=null,this.drawerId=Number((Date.now()+Math.random()).toString().replace(".",Math.round(Math.random()*9))).toString(16);var e=this.open!==void 0?this.open:!!this.defaultOpen;return x[this.drawerId]=e,this.orignalOpen=this.open,this.preProps=h({},this.$props),{sOpen:e,isOpenChange:void 0,passive:void 0,container:void 0}},watch:{open:function(n){function e(t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(n){var e=this;n!==void 0&&n!==this.preProps.open&&(this.isOpenChange=!0,this.container||this.getDefault(this.$props),this.setState({sOpen:open})),this.preProps.open=n,n&&setTimeout(function(){e.domFocus()})}),placement:function(e){e!==this.preProps.placement&&(this.contentDom=null),this.preProps.placement=e},level:function(e){this.preProps.level!==e&&this.getParentAndLevelDom(this.$props),this.preProps.level=e}},mounted:function(){var e=this;M(function(){N||(e.passive=j?{passive:!1}:!1);var t=e.getOpen();(e.handler||t||e.sFirstEnter)&&(e.getDefault(e.$props),t&&(e.isOpenChange=!0,M(function(){e.domFocus()})),e.$forceUpdate())})},updated:function(){var e=this;M(function(){!e.sFirstEnter&&e.container&&(e.$forceUpdate(),e.sFirstEnter=!0)})},beforeUnmount:function(){delete x[this.drawerId],delete this.isOpenChange,this.container&&(this.sOpen&&this.setLevelDomTransform(!1,!0),document.body.style.overflow=""),this.sFirstEnter=!1,clearTimeout(this.timeout)},methods:{domFocus:function(){this.dom&&this.dom.focus()},onKeyDown:function(e){e.keyCode===ae.ESC&&(e.stopPropagation(),this.__emit("close",e))},onMaskTouchEnd:function(e){this.__emit("close",e),this.onTouchEnd(e,!0)},onIconTouchEnd:function(e){this.__emit("handleClick",e),this.onTouchEnd(e)},onTouchEnd:function(e,t){if(this.open===void 0){var o=t||this.sOpen;this.isOpenChange=!0,this.setState({sOpen:!o})}},onWrapperTransitionEnd:function(e){if(e.target===this.contentWrapper&&e.propertyName.match(/transform$/)){var t=this.getOpen();this.dom.style.transition="",!t&&this.getCurrentDrawerSome()&&(document.body.style.overflowX="",this.maskDom&&(this.maskDom.style.left="",this.maskDom.style.width="")),this.afterVisibleChange&&this.afterVisibleChange(!!t)}},getDefault:function(e){this.getParentAndLevelDom(e),(e.getContainer||e.parent)&&(this.container=this.defaultGetContainer())},getCurrentDrawerSome:function(){return!Object.keys(x).some(function(e){return x[e]})},getSelfContainer:function(){return this.container},getParentAndLevelDom:function(e){var t=this;if(!N){var o=e.level,r=e.getContainer;if(this.levelDom=[],r){if(typeof r=="string"){var i=document.querySelectorAll(r)[0];this.parent=i}typeof r=="function"&&(this.parent=r()),le(r)==="object"&&r instanceof window.HTMLElement&&(this.parent=r)}if(!r&&this.container&&(this.parent=this.container.parentNode),o==="all"){var l=Array.prototype.slice.call(this.parent.children);l.forEach(function(a){a.nodeName!=="SCRIPT"&&a.nodeName!=="STYLE"&&a.nodeName!=="LINK"&&a!==t.container&&t.levelDom.push(a)})}else o&&Ce(o).forEach(function(a){document.querySelectorAll(a).forEach(function(c){t.levelDom.push(c)})})}},setLevelDomTransform:function(e,t,o,r){var i=this,l=this.$props,a=l.placement,c=l.levelMove,d=l.duration,m=l.ease,b=l.getContainer;if(!N&&(this.levelDom.forEach(function(u){if(u&&(i.isOpenChange||t)){u.style.transition="transform ".concat(d," ").concat(m),U(u,z,i.trnasitionEnd);var y=e?r:0;if(c){var _=De(c,{target:u,open:e});y=e?_[0]:_[1]||0}var T=typeof y=="number"?"".concat(y,"px"):y,k=a==="left"||a==="top"?T:"-".concat(T);u.style.transform=y?"".concat(o,"(").concat(k,")"):"",u.style.msTransform=y?"".concat(o,"(").concat(k,")"):""}}),b==="body")){var v=["touchstart"],S=[document.body,this.maskDom,this.handlerdom,this.contentDom],f=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?ce(1):0,O="width ".concat(d," ").concat(m),g="transform ".concat(d," ").concat(m);if(e&&document.body.style.overflow!=="hidden"){if(document.body.style.overflow="hidden",f&&(document.body.style.position="relative",document.body.style.width="calc(100% - ".concat(f,"px)"),clearTimeout(this.timeout),this.dom)){switch(this.dom.style.transition="none",a){case"right":this.dom.style.transform="translateX(-".concat(f,"px)"),this.dom.style.msTransform="translateX(-".concat(f,"px)");break;case"top":case"bottom":this.dom.style.width="calc(100% - ".concat(f,"px)"),this.dom.style.transform="translateZ(0)";break}this.timeout=setTimeout(function(){i.dom.style.transition="".concat(g,",").concat(O),i.dom.style.width="",i.dom.style.transform="",i.dom.style.msTransform=""})}S.forEach(function(u,y){!u||U(u,v[y]||"touchmove",y?i.removeMoveHandler:i.removeStartHandler,i.passive)})}else if(this.getCurrentDrawerSome()){if(document.body.style.overflow="",(this.isOpenChange||t)&&f&&(document.body.style.position="",document.body.style.width="",J&&(document.body.style.overflowX="hidden"),a==="right"&&this.maskDom&&(this.maskDom.style.left="-".concat(f,"px"),this.maskDom.style.width="calc(100% + ".concat(f,"px)")),clearTimeout(this.timeout),this.dom)){this.dom.style.transition="none";var C;switch(a){case"right":{this.dom.style.transform="translateX(".concat(f,"px)"),this.dom.style.msTransform="translateX(".concat(f,"px)"),this.dom.style.width="100%",O="width 0s ".concat(m," ").concat(d);break}case"top":case"bottom":{this.dom.style.width="calc(100% + ".concat(f,"px)"),this.dom.style.height="100%",this.dom.style.transform="translateZ(0)",C="height 0s ".concat(m," ").concat(d);break}}this.timeout=setTimeout(function(){i.dom.style.transition="".concat(g,",").concat(C?"".concat(C,","):"").concat(O),i.dom.style.transform="",i.dom.style.msTransform="",i.dom.style.width="",i.dom.style.height=""})}S.forEach(function(u,y){!u||X(u,v[y]||"touchmove",y?i.removeMoveHandler:i.removeStartHandler,i.passive)})}}var E=this.$attrs.onChange;E&&this.isOpenChange&&this.sFirstEnter&&(E(e),this.isOpenChange=!1)},getChildToRender:function(e){var t,o=this,r,i=this.$props,l=i.prefixCls,a=i.placement,c=i.handler,d=i.showMask,m=i.maskStyle,b=i.width,v=i.height,S=i.wrapStyle,f=i.keyboard,O=i.maskClosable,g=this.$attrs,C=g.class,E=g.style,u=Se(g,["class","style"]),y=he(this),_=Y(l,(t={},D(t,"".concat(l,"-").concat(a),!0),D(t,"".concat(l,"-open"),e),D(t,"no-mask",!d),D(t,C,C),t)),T=this.isOpenChange,k=a==="left"||a==="right",I="translate".concat(k?"X":"Y"),Q=a==="left"||a==="top"?"-100%":"100%",B=e?"":"".concat(I,"(").concat(Q,")");if(T===void 0||T){var ee=this.contentDom?this.contentDom.getBoundingClientRect()[k?"width":"height"]:0,te=(k?b:v)||ee;this.setLevelDomTransform(e,!1,I,te)}var F;if(c!==!1){var ne=p("div",{class:"drawer-handle",onClick:function(){}},[p("i",{class:"drawer-handle-icon"},null)]),oe=this.handler,L=oe||ne,A=L.props&&L.props.onClick;F=de(L,{onClick:function(w){A&&A(w),o.onIconTouchEnd(w)},ref:function(w){o.handlerdom=w}})}var se=h(h({},u),{class:_,onTransitionend:this.onWrapperTransitionEnd,onKeydown:e&&f?this.onKeyDown:$,style:h(h({},S),E)}),re=(r={},D(r,j?"onTouchstartPassive":"onTouchstart",e?this.removeStartHandler:$),D(r,j?"onTouchmovePassive":"onTouchmove",e?this.removeMoveHandler:$),r);return p("div",H(H({ref:function(w){o.dom=w}},se),{},{tabindex:-1}),[d&&p("div",{key:e,class:"".concat(l,"-mask"),onClick:O?this.onMaskTouchEnd:$,style:m,ref:function(w){o.maskDom=w}},null),p("div",{class:"".concat(l,"-content-wrapper"),style:{transform:B,msTransform:B,width:K(b)?"".concat(b,"px"):b,height:K(v)?"".concat(v,"px"):v},ref:function(w){o.contentWrapper=w}},[p("div",H({class:"".concat(l,"-content"),ref:function(w){o.contentDom=w}},re),[y]),F])])},getOpen:function(){return this.open!==void 0?this.open:this.sOpen},getTouchParentScroll:function(e,t,o,r){if(!t||t===document)return!1;if(t===e.parentNode)return!0;var i=Math.max(Math.abs(o),Math.abs(r))===Math.abs(r),l=Math.max(Math.abs(o),Math.abs(r))===Math.abs(o),a=t.scrollHeight-t.clientHeight,c=t.scrollWidth-t.clientWidth,d=t.scrollTop,m=t.scrollLeft;t.scrollTo&&t.scrollTo(t.scrollLeft+1,t.scrollTop+1);var b=t.scrollTop,v=t.scrollLeft;return t.scrollTo&&t.scrollTo(t.scrollLeft-1,t.scrollTop-1),i&&(!a||!(b-d)||a&&(t.scrollTop>=a&&r<0||t.scrollTop<=0&&r>0))||l&&(!c||!(v-m)||c&&(t.scrollLeft>=c&&o<0||t.scrollLeft<=0&&o>0))?this.getTouchParentScroll(e,t.parentNode,o,r):!1},removeStartHandler:function(e){e.touches.length>1||(this.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},removeMoveHandler:function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,o=e.changedTouches[0].clientX-this.startPos.x,r=e.changedTouches[0].clientY-this.startPos.y;(t===this.maskDom||t===this.handlerdom||t===this.contentDom&&this.getTouchParentScroll(t,e.target,o,r))&&e.preventDefault()}},trnasitionEnd:function(e){X(e.target,z,this.trnasitionEnd),e.target.style.transition=""},defaultGetContainer:function(){if(N)return null;var e=document.createElement("div");return this.parent.appendChild(e),this.wrapperClassName&&(e.className=this.wrapperClassName),e}},render:function(){var e=this,t=this.$props,o=t.getContainer,r=t.wrapperClassName,i=t.handler,l=t.forceRender,a=this.getOpen(),c=null;x[this.drawerId]=a&&this.container;var d=this.getChildToRender(this.sFirstEnter?a:!1);if(!o)return p("div",{class:r,ref:function(v){e.container=v}},[d]);if(!this.container||!a&&!this.sFirstEnter)return null;var m=!!i||l;return(m||a||this.dom)&&(c=p(fe,{to:this.getSelfContainer()},{default:function(){return[d]}})),c}}),Ee=Oe,ke=globalThis&&globalThis.__rest||function(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t},Pe=pe("top","right","bottom","left"),Te=V({name:"ADrawer",mixins:[G],inheritAttrs:!1,props:{closable:s.looseBool.def(!0),destroyOnClose:s.looseBool,getContainer:s.any,maskClosable:s.looseBool.def(!0),mask:s.looseBool.def(!0),maskStyle:s.object,wrapStyle:s.object,bodyStyle:s.object,headerStyle:s.object,drawerStyle:s.object,title:s.VNodeChild,visible:s.looseBool,width:s.oneOfType([s.string,s.number]).def(256),height:s.oneOfType([s.string,s.number]).def(256),zIndex:s.number,prefixCls:s.string,placement:s.oneOf(Pe).def("right"),level:s.any.def(null),wrapClassName:s.string,handle:s.VNodeChild,afterVisibleChange:s.func,keyboard:s.looseBool.def(!0),onClose:s.func,"onUpdate:visible":s.func},setup:function(e){var t=R("configProvider",me);return{configProvider:t,destroyClose:!1,preVisible:e.visible,parentDrawer:R("parentDrawer",null)}},data:function(){return{sPush:!1}},beforeCreate:function(){ve("parentDrawer",this)},mounted:function(){var e=this.visible;e&&this.parentDrawer&&this.parentDrawer.push()},updated:function(){var e=this;M(function(){e.preVisible!==e.visible&&e.parentDrawer&&(e.visible?e.parentDrawer.push():e.parentDrawer.pull()),e.preVisible=e.visible})},beforeUnmount:function(){this.parentDrawer&&this.parentDrawer.pull()},methods:{domFocus:function(){this.$refs.vcDrawer&&this.$refs.vcDrawer.domFocus()},close:function(e){this.$emit("update:visible",!1),this.$emit("close",e)},push:function(){this.setState({sPush:!0})},pull:function(){var e=this;this.setState({sPush:!1},function(){e.domFocus()})},onDestroyTransitionEnd:function(){var e=this.getDestroyOnClose();!e||this.visible||(this.destroyClose=!0,this.$forceUpdate())},getDestroyOnClose:function(){return this.destroyOnClose&&!this.visible},getPushTransform:function(e){if(e==="left"||e==="right")return"translateX(".concat(e==="left"?180:-180,"px)");if(e==="top"||e==="bottom")return"translateY(".concat(e==="top"?180:-180,"px)")},getRcDrawerStyle:function(){var e=this.$props,t=e.zIndex,o=e.placement,r=e.wrapStyle,i=this.$data.sPush;return h({zIndex:t,transform:i?this.getPushTransform(o):void 0},r)},renderHeader:function(e){var t=this.$props,o=t.closable,r=t.headerStyle,i=W(this,"title");if(!i&&!o)return null;var l=i?"".concat(e,"-header"):"".concat(e,"-header-no-title");return p("div",{class:l,style:r},[i&&p("div",{class:"".concat(e,"-title")},[i]),o?this.renderCloseIcon(e):null])},renderCloseIcon:function(e){var t=this.closable;return t&&p("button",{key:"closer",onClick:this.close,"aria-label":"Close",class:"".concat(e,"-close")},[p(ye,null,null)])},renderBody:function(e){var t,o;if(this.destroyClose&&!this.visible)return null;this.destroyClose=!1;var r=this.$props,i=r.bodyStyle,l=r.drawerStyle,a={},c=this.getDestroyOnClose();return c&&(a.opacity=0,a.transition="opacity .3s"),p("div",{class:"".concat(e,"-wrapper-body"),style:h(h({},a),l),onTransitionend:this.onDestroyTransitionEnd},[this.renderHeader(e),p("div",{key:"body",class:"".concat(e,"-body"),style:i},[(o=(t=this.$slots).default)===null||o===void 0?void 0:o.call(t)])])}},render:function(){var e,t=this,o=be(this),r=o.prefixCls,i=o.width,l=o.height,a=o.visible,c=o.placement,d=o.wrapClassName,m=o.mask,b=ke(o,["prefixCls","width","height","visible","placement","wrapClassName","mask"]),v=m?"":"no-mask",S={};c==="left"||c==="right"?S.width=typeof i=="number"?"".concat(i,"px"):i:S.height=typeof l=="number"?"".concat(l,"px"):l;var f=W(this,"handle")||!1,O=this.configProvider.getPrefixCls,g=O("drawer",r),C=this.$attrs.class,E=h(h(h(h(h({},this.$attrs),we(b,["closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","visible","getPopupContainer","rootPrefixCls","getPrefixCls","renderEmpty","csp","pageHeader","autoInsertSpaceInButton"])),{onClose:this.close,handler:f}),S),{prefixCls:g,open:a,showMask:m,placement:c,class:Y((e={},D(e,C,!!C),D(e,d,!!d),D(e,v,!!v),e)),wrapStyle:this.getRcDrawerStyle(),ref:"vcDrawer"});return p(Ee,E,{default:function(){return[t.renderBody(g)]}})}}),_e=ue(Te);export{_e as D};
