import{H as i,aj as X,a as D,w as d,a2 as G,f as J,V as K,a3 as I,L as E,ao as Q,cE as U,S as l,p as g,_ as m,ct as Y,T as P}from"./index.4804300a.js";import{u as Z}from"./useBreakpoint.3a1e9c1a.js";import{r as $}from"./responsiveObserve.dcad6fcd.js";import{u as ee}from"./useSize.ea1bf5d1.js";var ae={prefixCls:i.string,shape:i.oneOf(X("circle","square")).def("circle"),size:{type:[Number,String,Object],default:function(){return"default"}},src:i.string,srcset:i.string,icon:i.VNodeChild,alt:i.string,gap:i.number,draggable:i.bool,loadError:{type:Function}},re=D({name:"AAvatar",inheritAttrs:!1,props:ae,slots:["icon"],setup:function(a,_){var z=_.slots,h=_.attrs,p=d(!0),j=d(!1),x=d(1),S=d(null),y=d(null),R=G("avatar",a),W=R.prefixCls,k=ee(),w=Z(),o=J(function(){if(K(a.size)==="object"){var r=$.find(function(t){return w.value[t]}),e=a.size[r];return e}}),H=function(e){return o.value?{width:"".concat(o.value,"px"),height:"".concat(o.value,"px"),lineHeight:"".concat(o.value,"px"),fontSize:"".concat(e?o.value/2:18,"px")}:{}},b=function(){if(!(!S.value||!y.value)){var e=S.value.offsetWidth,t=y.value.offsetWidth;if(e!==0&&t!==0){var u=a.gap,c=u===void 0?4:u;c*2<t&&(x.value=t-c*2<e?(t-c*2)/e:1)}}},N=function(){var e=a.loadError,t=e==null?void 0:e();t!==!1&&(p.value=!1)};return I(function(){return a.src},function(){E(function(){p.value=!0,x.value=1})}),I(function(){return a.gap},function(){E(function(){b()})}),Q(function(){E(function(){b(),j.value=!0})}),function(){var r,e,t=a.shape,u=a.size,c=a.src,L=a.alt,O=a.srcset,V=a.draggable,v=U(z,a,"icon"),s=W.value,n=u==="default"?k.value:u,B=(r={},l(r,"".concat(h.class),!!h.class),l(r,s,!0),l(r,"".concat(s,"-lg"),n==="large"),l(r,"".concat(s,"-sm"),n==="small"),l(r,"".concat(s,"-").concat(t),t),l(r,"".concat(s,"-image"),c&&p.value),l(r,"".concat(s,"-icon"),v),r),F=typeof n=="number"?{width:"".concat(n,"px"),height:"".concat(n,"px"),lineHeight:"".concat(n,"px"),fontSize:v?"".concat(n/2,"px"):"18px"}:{},A=(e=z.default)===null||e===void 0?void 0:e.call(z),f;if(c&&p.value)f=g("img",{draggable:V,src:c,srcset:O,onError:N,alt:L},null);else if(v)f=v;else if(j.value||x.value!==1){var C="scale(".concat(x.value,") translateX(-50%)"),M={msTransform:C,WebkitTransform:C,transform:C},q=typeof n=="number"?{lineHeight:"".concat(n,"px")}:{};f=g(Y,{onResize:b},{default:function(){return[g("span",{class:"".concat(s,"-string"),ref:S,style:m(m({},q),M)},[A])]}})}else f=g("span",{class:"".concat(s,"-string"),ref:S,style:{opacity:0}},[A]);return g("span",P(P({},h),{},{ref:y,class:B,style:m(m(m({},F),H(!!v)),h.style)}),[f])}}}),le=re;export{le as A,ae as a};
