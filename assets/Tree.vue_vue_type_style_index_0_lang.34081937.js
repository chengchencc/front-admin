var Ct=Object.defineProperty,$t=Object.defineProperties;var Pt=Object.getOwnPropertyDescriptors;var Pe=Object.getOwnPropertySymbols;var Ft=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable;var Fe=(e,t,n)=>t in e?Ct(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N=(e,t)=>{for(var n in t||(t={}))Ft.call(t,n)&&Fe(e,n,t[n]);if(Pe)for(var n of Pe(t))Nt.call(t,n)&&Fe(e,n,t[n]);return e},Z=(e,t)=>$t(e,Pt(t));var Ne=(e,t,n)=>new Promise((r,a)=>{var s=m=>{try{y(n.next(m))}catch(p){a(p)}},i=m=>{try{y(n.throw(m))}catch(p){a(p)}},y=m=>m.done?r(m.value):Promise.resolve(m.value).then(s,i);y((n=n.apply(e,t)).next())});import{er as X,V as Lt,es as at,et as ye,K as Dt,p as b,s as re,a as ae,an as st,_ as E,J as ct,T as lt,ab as It,ai as Bt,N as te,cc as it,Q as ot,R as Le,O as ne,S as pe,H as l,U,ac as Mt,ak as jt,ce as oe,eu as Ht,ev as Vt,aK as zt,ew as qt,ex as Ut,aL as Rt,dX as Gt,dP as De,ey as Wt,aF as Jt,b$ as Qt,bf as ve,dv as Xt,cG as Yt,bg as de,I as Zt,aE as _,c as en,w as dt,f as z,a3 as q,au as tn,bC as nn,aw as M,o as D,i as G,aA as rn,l as V,k as ue,B as W,C as Ie,t as Be,r as an,F as me,az as sn,aB as cn,aC as ln,bu as on,j as x,ae as Me,ez as je,x as He,b as dn,as as J,da as un,al as Ve,av as fe,eA as fn,e5 as hn,af as Q,ao as yn,ds as ze,y as qe,z as Ue,bN as pn,ax as Re,eB as Ge,cj as vn,eC as mn,bz as We,cC as gn}from"./index.ad6ac5fb.js";import{u as bn}from"./useContextMenu.07110e79.js";import{T as be}from"./Tree.ed2b8699.js";import{T as kn,F as ut,a as ft,n as xn,d as Sn}from"./util.906615f8.js";import{c as On,C as Kn}from"./CaretDownFilled.bf097aa7.js";import{g as he}from"./get.ebcb9447.js";var ht=X.endEvents.length!==0,Tn=["Webkit","Moz","O","ms"],Je=["-webkit-","-moz-","-o-","ms-",""];function ee(e,t){for(var n=window.getComputedStyle(e,null),r="",a=0;a<Je.length&&(r=n.getPropertyValue(Je[a]+t),!r);a++);return r}function yt(e){if(ht){var t=parseFloat(ee(e,"transition-delay"))||0,n=parseFloat(ee(e,"transition-duration"))||0,r=parseFloat(ee(e,"animation-delay"))||0,a=parseFloat(ee(e,"animation-duration"))||0,s=Math.max(n+t,a+r);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},s*1e3+200)}}function pt(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var se=function(t,n,r){var a=Lt(n)==="object",s=a?n.name:n,i=a?n.active:"".concat(n,"-active"),y=r,m,p,c=On(t);return r&&Object.prototype.toString.call(r)==="[object Object]"&&(y=r.end,m=r.start,p=r.active),t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(o){o&&o.target!==t||(t.rcAnimTimeout&&(at(t.rcAnimTimeout),t.rcAnimTimeout=null),pt(t),c.remove(s),c.remove(i),X.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,y&&y())},X.addEndEventListener(t,t.rcEndListener),m&&m(),c.add(s),t.rcAnimTimeout=ye(function(){t.rcAnimTimeout=null,c.add(s),c.add(i),p&&ye(p,0),yt(t)},30),{stop:function(){t.rcEndListener&&t.rcEndListener()}}};se.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(r){r&&r.target!==e||(e.rcAnimTimeout&&(at(e.rcAnimTimeout),e.rcAnimTimeout=null),pt(e),X.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},X.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=ye(function(){for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r]);e.rcAnimTimeout=null,yt(e)},0)};se.setTransition=function(e,t,n){var r=t,a=n;n===void 0&&(a=r,r=""),r=r||"",Tn.forEach(function(s){e.style["".concat(s,"Transition").concat(r)]=a})};se.isCssAnimationSupported=ht;var En=se;function Qe(e,t,n){var r,a,s;return En(e,"ant-motion-collapse-legacy",{start:function(){s&&cancelAnimationFrame(s),t?(r=e.offsetHeight,r===0?s=requestAnimationFrame(function(){r=e.offsetHeight,e.style.height="0px",e.style.opacity="0"}):(e.style.height="0px",e.style.opacity="0")):(e.style.height="".concat(e.offsetHeight,"px"),e.style.opacity="1")},active:function(){a&&cancelAnimationFrame(a),a=requestAnimationFrame(function(){e.style.height="".concat(t?r:0,"px"),e.style.opacity=t?"1":"0"})},end:function(){s&&cancelAnimationFrame(s),a&&cancelAnimationFrame(a),e.style.height="",e.style.opacity="",n&&n()}})}var _n={onEnter:function(t,n){Dt(function(){Qe(t,!0,n)})},onLeave:function(t,n){return Qe(t,!1,n)}},An=_n,wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Cn=wn;function Xe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){$n(e,a,n[a])})}return e}function $n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(t,n){var r=Xe({},t,n.attrs);return b(re,Xe({},r,{icon:Cn}),null)};ke.displayName="MinusSquareOutlined";ke.inheritAttrs=!1;var Pn=ke,Fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Nn=Fn;function Ye(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){Ln(e,a,n[a])})}return e}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=function(t,n){var r=Ye({},t,n.attrs);return b(re,Ye({},r,{icon:Nn}),null)};xe.displayName="PlusSquareOutlined";xe.inheritAttrs=!1;var Dn=xe;be.TreeNode=kn;var Ze=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},In=be.TreeNode;function vt(){return{showLine:l.looseBool,multiple:l.looseBool,autoExpandParent:l.looseBool,checkStrictly:l.looseBool,checkable:l.looseBool,disabled:l.looseBool,defaultExpandAll:l.looseBool,defaultExpandParent:l.looseBool,defaultExpandedKeys:l.arrayOf(l.oneOfType([l.string,l.number])),expandedKeys:l.arrayOf(l.oneOfType([l.string,l.number])),checkedKeys:l.oneOfType([l.arrayOf(l.oneOfType([l.string,l.number])),l.shape({checked:l.arrayOf(l.oneOfType([l.string,l.number])),halfChecked:l.arrayOf(l.oneOfType([l.string,l.number]))}).loose]),defaultCheckedKeys:l.arrayOf(l.oneOfType([l.string,l.number])),selectedKeys:l.arrayOf(l.oneOfType([l.string,l.number])),defaultSelectedKeys:l.arrayOf(l.oneOfType([l.string,l.number])),selectable:l.looseBool,filterAntTreeNode:l.func,loadData:l.func,loadedKeys:l.arrayOf(l.oneOfType([l.string,l.number])),draggable:l.looseBool,showIcon:l.looseBool,icon:l.func,switcherIcon:l.any,prefixCls:l.string,filterTreeNode:l.func,openAnimation:l.any,treeData:{type:Array},replaceFields:l.object,blockNode:l.looseBool,onExpand:l.func,onCheck:l.func,onSelect:l.func,onClick:l.func,onDoubleclick:l.func,onDblclick:l.func,"onUpdate:selectedKeys":l.func,"onUpdate:checkedKeys":l.func,"onUpdate:expandedKeys":l.func}}var $=ae({name:"ATree",inheritAttrs:!1,props:st(vt(),{checkable:!1,showIcon:!1,openAnimation:E(E({},An),{appear:null}),blockNode:!1}),setup:function(){return{tree:null,configProvider:ct("configProvider",lt)}},TreeNode:In,methods:{renderSwitcherIcon:function(t,n,r){var a=r.isLeaf,s=r.loading,i=r.expanded,y=this.$props.showLine;if(s)return b(It,{class:"".concat(t,"-switcher-loading-icon")},null);if(a)return y?b(ut,{class:"".concat(t,"-switcher-line-icon")},null):null;var m="".concat(t,"-switcher-icon");return n?Bt(n,{class:m}):y?i?b(Pn,{class:"".concat(t,"-switcher-line-icon")},null):b(Dn,{class:"".concat(t,"-switcher-line-icon")},null):b(Kn,{class:m},null)},updateTreeData:function(t){var n=this,r=this.$slots,a={children:"children",title:"title",key:"key"},s=E(E({},a),this.$props.replaceFields);return t.map(function(i){var y=i[s.key],m=i[s.children],p=i.slots,c=p===void 0?{}:p,o=i.class,u=i.style,f=Ze(i,["slots","class","style"]),v=E(E({},f),{icon:r[c.icon]||f.icon,switcherIcon:r[c.switcherIcon]||f.switcherIcon,title:r[c.title]||r.title||f[s.title],dataRef:i,key:y,class:o,style:u});return m?E(E({},v),{children:n.updateTreeData(m)}):v})},setTreeRef:function(t){this.tree=t},handleCheck:function(t,n){this.$emit("update:checkedKeys",t),this.$emit("check",t,n)},handleExpand:function(t,n){this.$emit("update:expandedKeys",t),this.$emit("expand",t,n)},handleSelect:function(t,n){this.$emit("update:selectedKeys",t),this.$emit("select",t,n)}},render:function(){var t=this,n,r=te(this),a=r.prefixCls,s=r.showIcon,i=r.treeNodes,y=r.blockNode,m=this.configProvider.getPrefixCls,p=m("tree",a),c=it(this,"switcherIcon"),o=r.checkable,u=r.treeData||i;u&&(u=this.updateTreeData(u));var f=this.$attrs,v=f.class,h=Ze(f,["class"]),g=E(E(E(E({},r),{prefixCls:p,checkable:o&&b("span",{class:"".concat(p,"-checkbox-inner")},null),children:ne(this),switcherIcon:function(w){return t.renderSwitcherIcon(p,c,w)},ref:this.setTreeRef}),h),{class:ot(v,(n={},Le(n,"".concat(p,"-icon-hide"),!s),Le(n,"".concat(p,"-block-node"),y),n)),onCheck:this.handleCheck,onExpand:this.handleExpand,onSelect:this.handleSelect});return u&&(g.treeData=u),b(be,pe(pe({},g),{},{__propsSymbol__:[]}),null)}}),Bn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},Mn=Bn;function et(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){jn(e,a,n[a])})}return e}function jn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=function(t,n){var r=et({},t,n.attrs);return b(re,et({},r,{icon:Mn}),null)};Se.displayName="FolderOpenOutlined";Se.inheritAttrs=!1;var Hn=Se,Vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},zn=Vn;function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),r.forEach(function(a){qn(e,a,n[a])})}return e}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(t,n){var r=tt({},t,n.attrs);return b(re,tt({},r,{icon:zn}),null)};Oe.displayName="FolderOutlined";Oe.inheritAttrs=!1;var Un=Oe,L;(function(e){e[e.None=0]="None",e[e.Start=1]="Start",e[e.End=2]="End"})(L||(L={}));function Ke(e,t){var n=xn(e)||[];function r(a){var s=a.key,i=ne(a);t(s,a)!==!1&&Ke(i,t)}n.forEach(r)}function Rn(e){var t=ft(e),n=t.keyEntities;return U(n.keys())}function Gn(e,t,n,r){var a=[],s=L.None;if(n&&n===r)return[n];if(!n||!r)return[];function i(y){return y===n||y===r}return Ke(e,function(y){if(s===L.End)return!1;if(i(y)){if(a.push(y),s===L.None)s=L.Start;else if(s===L.Start)return s=L.End,!1}else s===L.Start&&a.push(y);return t.indexOf(y)!==-1}),a}function nt(e,t){var n=U(t),r=[];return Ke(e,function(a,s){var i=n.indexOf(a);return i!==-1&&(r.push(s),n.splice(i,1)),!!n.length}),r}function mt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=t.key,a=r===void 0?"key":r,s=t.children,i=s===void 0?"children":s;return(e||[]).forEach(function(y){n.push(y[a]),y[i]&&(n=[].concat(U(n),U(mt(y[i],t))))}),n}var rt=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function Wn(e){var t=e.isLeaf,n=e.expanded;return t?b(ut,null,null):n?b(Hn,null,null):b(Un,null,null)}var ge=ae({name:"ADirectoryTree",mixins:[Mt],inheritAttrs:!1,props:st(E(E({},vt()),{expandAction:l.oneOf([!1,"click","doubleclick","dblclick"])}),{showIcon:!0,expandAction:"click"}),setup:function(){return{children:null,onDebounceExpand:null,tree:null,lastSelectedKey:"",cachedSelectedKeys:[],configProvider:ct("configProvider",lt)}},data:function(){var t=te(this),n=t.defaultExpandAll,r=t.defaultExpandParent,a=t.expandedKeys,s=t.defaultExpandedKeys,i=ne(this),y=ft(i),m=y.keyEntities,p={};return p._selectedKeys=t.selectedKeys||t.defaultSelectedKeys||[],n?t.treeData?p._expandedKeys=mt(t.treeData,t.replaceFields):p._expandedKeys=Rn(i):r?p._expandedKeys=Sn(a||s,m):p._expandedKeys=a||s,E({_selectedKeys:[],_expandedKeys:[]},p)},watch:{expandedKeys:function(t){this.setState({_expandedKeys:t})},selectedKeys:function(t){this.setState({_selectedKeys:t})}},created:function(){this.onDebounceExpand=jt(this.expandFolderNode,200,{leading:!0})},methods:{handleExpand:function(t,n){this.setUncontrolledState({_expandedKeys:t}),this.$emit("update:expandedKeys",t),this.$emit("expand",t,n)},handleClick:function(t,n){var r=this.$props.expandAction;r==="click"&&this.onDebounceExpand(t,n),this.$emit("click",t,n)},handleDoubleClick:function(t,n){var r=this.$props.expandAction;(r==="dblclick"||r==="doubleclick")&&this.onDebounceExpand(t,n),this.$emit("doubleclick",t,n),this.$emit("dblclick",t,n)},hanldeSelect:function(t,n){var r=this.$props.multiple,a=this.children||[],s=this.$data._expandedKeys,i=s===void 0?[]:s,y=n.node,m=n.nativeEvent,p=y.eventKey,c=p===void 0?"":p,o={},u=E(E({},n),{selected:!0}),f=m.ctrlKey||m.metaKey,v=m.shiftKey,h;r&&f?(h=t,this.lastSelectedKey=c,this.cachedSelectedKeys=h,u.selectedNodes=nt(a,h)):r&&v?(h=Array.from(new Set([].concat(U(this.cachedSelectedKeys||[]),U(Gn(a,i,c,this.lastSelectedKey))))),u.selectedNodes=nt(a,h)):(h=[c],this.lastSelectedKey=c,this.cachedSelectedKeys=h,u.selectedNodes=[n.node]),o._selectedKeys=h,this.$emit("update:selectedKeys",h),this.$emit("select",h,u),this.setUncontrolledState(o)},setTreeRef:function(t){this.tree=t},expandFolderNode:function(t,n){var r=n.isLeaf;if(!(r||t.shiftKey||t.metaKey||t.ctrlKey)&&this.tree.tree){var a=this.tree.tree;a.onNodeExpand(t,n)}},setUncontrolledState:function(t){var n=oe(t,Object.keys(te(this)).map(function(r){return"_".concat(r)}));Object.keys(n).length&&this.setState(n)},handleCheck:function(t,n){this.$emit("update:checkedKeys",t),this.$emit("check",t,n)}},render:function(){var t=this;this.children=ne(this);var n=te(this),r=n.prefixCls,a=rt(n,["prefixCls"]),s=this.configProvider.getPrefixCls,i=s("tree",r),y=this.$data,m=y._expandedKeys,p=y._selectedKeys,c=this.$attrs,o=c.class,u=rt(c,["class"]),f=ot("".concat(i,"-directory"),o),v=E(E(E({icon:Wn},u),oe(a,["onUpdate:selectedKeys","onUpdate:checkedKeys","onUpdate:expandedKeys"])),{prefixCls:i,expandedKeys:m,selectedKeys:p,switcherIcon:it(this,"switcherIcon"),ref:this.setTreeRef,class:f,onSelect:this.hanldeSelect,onClick:this.handleClick,onDblclick:this.handleDoubleClick,onExpand:this.handleExpand,onCheck:this.handleCheck});return b($,v,pe({default:function(){return[t.children]}},oe(this.$slots,["default"])))}});$.TreeNode.name="ATreeNode";$.DirectoryTree=ge;$.install=function(e){return e.component($.name,$),e.component($.TreeNode.name,$.TreeNode),e.component(ge.name,ge),e};$.TreeNode;var Jn=200;function Qn(e,t,n,r){var a=-1,s=qt,i=!0,y=e.length,m=[],p=t.length;if(!y)return m;n&&(t=Ht(t,Vt(n))),r?(s=Ut,i=!1):t.length>=Jn&&(s=Rt,i=!1,t=new zt(t));e:for(;++a<y;){var c=e[a],o=n==null?c:n(c);if(c=r||c!==0?c:0,i&&o===o){for(var u=p;u--;)if(t[u]===o)continue e;m.push(c)}else s(t,o,r)||m.push(c)}return m}var Xn=Gt(function(e,t){return De(e)?Qn(e,Wt(t,1,De,!0)):[]}),Yn=Xn;const Zn=({icon:e})=>e?Jt(e)?Qt(ve,{icon:e,class:"mr-1"}):ve:null;const er=ae({name:"BasicTreeHeader",components:{BasicTitle:Xt,Icon:ve,Dropdown:Yt,Menu:de,MenuItem:de.Item,MenuDivider:de.Divider,InputSearch:Zt.Search},props:{helpMessage:{type:[String,Array],default:""},title:_.string,toolbar:_.bool,checkable:_.bool,search:_.bool,checkAll:_.func,expandAll:_.func,searchText:_.string},emits:["strictly-change","search"],setup(e,{emit:t,slots:n}){const{t:r}=en(),a=dt(""),s=z(()=>{const c=n.headerTitle||e.title;return["mr-1","w-full",{["ml-5"]:c}]}),i=z(()=>{const{checkable:c}=e,o=[{label:r("component.tree.expandAll"),value:2},{label:r("component.tree.unExpandAll"),value:3,divider:c}];return c?[{label:r("component.tree.selectAll"),value:0},{label:r("component.tree.unSelectAll"),value:1,divider:c},...o,{label:r("component.tree.checkStrictly"),value:4},{label:r("component.tree.checkUnStrictly"),value:5}]:o});function y(c){var u,f,v,h;const{key:o}=c;switch(o){case 0:(u=e.checkAll)==null||u.call(e,!0);break;case 1:(f=e.checkAll)==null||f.call(e,!1);break;case 2:(v=e.expandAll)==null||v.call(e,!0);break;case 3:(h=e.expandAll)==null||h.call(e,!1);break;case 4:t("strictly-change",!1);break;case 5:t("strictly-change",!0);break}}function m(c){t("search",c)}const p=nn(m,200);return q(()=>a.value,c=>{p(c)}),q(()=>e.searchText,c=>{c!==a.value&&(a.value=c)}),{t:r,toolbarList:i,handleMenuClick:y,searchValue:a,getInputSearchCls:s}}}),tr={class:"flex px-2 py-1.5 items-center basic-tree-header"},nr={key:2,class:"flex flex-1 justify-self-stretch items-center cursor-pointer"};function rr(e,t,n,r,a,s){const i=M("BasicTitle"),y=M("InputSearch"),m=M("Icon"),p=M("MenuItem"),c=M("MenuDivider"),o=M("Menu"),u=M("Dropdown");return D(),G("div",tr,[e.$slots.headerTitle?rn(e.$slots,"headerTitle",{key:0},void 0,!0):V("",!0),!e.$slots.headerTitle&&e.title?(D(),ue(i,{key:1,helpMessage:e.helpMessage},{default:W(()=>[Ie(Be(e.title),1)]),_:1},8,["helpMessage"])):V("",!0),e.search||e.toolbar?(D(),G("div",nr,[e.search?(D(),G("div",{key:0,class:an(e.getInputSearchCls)},[b(y,{placeholder:e.t("common.searchText"),size:"small",allowClear:"",value:e.searchValue,"onUpdate:value":t[0]||(t[0]=f=>e.searchValue=f)},null,8,["placeholder","value"])],2)):V("",!0),e.toolbar?(D(),ue(u,{key:1,onClick:t[1]||(t[1]=on(()=>{},["prevent"]))},{overlay:W(()=>[b(o,{onClick:e.handleMenuClick},{default:W(()=>[(D(!0),G(me,null,sn(e.toolbarList,f=>(D(),G(me,{key:f.value},[b(p,cn(ln({key:f.value})),{default:W(()=>[Ie(Be(f.label),1)]),_:2},1040),f.divider?(D(),ue(c,{key:0})):V("",!0)],64))),128))]),_:1},8,["onClick"])]),default:W(()=>[b(m,{icon:"ion:ellipsis-vertical"})]),_:1})):V("",!0)])):V("",!0)])}var ar=tn(er,[["render",rr],["__scopeId","data-v-05dbfd0e"]]);function sr(e,t){function n(c){const o=[],u=c||x(e),{key:f,children:v}=x(t);if(!v||!f)return o;for(let h=0;h<u.length;h++){const g=u[h];o.push(g[f]);const S=g[v];S&&S.length&&o.push(...n(S))}return o}function r(c){const o=[],u=c||x(e),{key:f,children:v}=x(t);if(!v||!f)return o;for(let h=0;h<u.length;h++){const g=u[h];g.disabled!==!0&&g.selectable!==!1&&o.push(g[f]);const S=g[v];S&&S.length&&o.push(...r(S))}return o}function a(c,o){const u=[],f=o||x(e),{key:v,children:h}=x(t);if(!h||!v)return u;for(let g=0;g<f.length;g++){const S=f[g],w=S[h];c===S[v]?(u.push(S[v]),w&&w.length&&u.push(...n(w))):w&&w.length&&u.push(...a(c,w))}return u}function s(c,o,u){if(!c)return;const f=u||x(e),{key:v,children:h}=x(t);if(!(!h||!v))for(let g=0;g<f.length;g++){const S=f[g],w=S[h];if(S[v]===c){f[g]=N(N({},f[g]),o);break}else w&&w.length&&s(c,o,S[h])}}function i(c=1,o,u=1){if(!c)return[];const f=[],v=o||x(e)||[];for(let h=0;h<v.length;h++){const g=v[h],{key:S,children:w}=x(t),ce=S?g[S]:"",R=w?g[w]:[];f.push(ce),R&&R.length&&u<c&&(u+=1,f.push(...i(c,R,u)))}return f}function y({parentKey:c=null,node:o,push:u="push"}){const f=Me(x(e));if(!c){f[u](o),e.value=f;return}const{key:v,children:h}=x(t);!h||!v||(je(f,g=>{if(g[v]===c)return g[h]=g[h]||[],g[h][u](o),!0}),e.value=f)}function m({parentKey:c=null,list:o,push:u="push"}){const f=Me(x(e));if(!(!o||o.length<1))if(c){const{key:v,children:h}=x(t);if(!h||!v)return;je(f,g=>{if(g[v]===c){g[h]=g[h]||[];for(let S=0;S<o.length;S++)g[h][u](o[S]);return e.value=f,!0}})}else for(let v=0;v<o.length;v++)f[u](o[v])}function p(c,o){if(!c)return;const u=o||x(e),{key:f,children:v}=x(t);if(!(!v||!f))for(let h=0;h<u.length;h++){const g=u[h],S=g[v];if(g[f]===c){u.splice(h,1);break}else S&&S.length&&p(c,g[v])}}return{deleteNodeByKey:p,insertNodeByKey:y,insertNodesByKey:m,filterByLevel:i,updateNodeByKey:s,getAllKeys:n,getChildrenKeys:a,getEnabledKeys:r}}const cr={value:{type:[Object,Array]},renderIcon:{type:Function},helpMessage:{type:[String,Array],default:""},title:_.string,toolbar:_.bool,search:_.bool,searchValue:_.string,checkStrictly:_.bool,clickRowToExpand:_.bool.def(!0),checkable:_.bool.def(!1),defaultExpandLevel:{type:[String,Number],default:""},defaultExpandAll:_.bool.def(!1),replaceFields:{type:Object},treeData:{type:Array},actionList:{type:Array,default:()=>[]},expandedKeys:{type:Array,default:()=>[]},selectedKeys:{type:Array,default:()=>[]},checkedKeys:{type:Array,default:()=>[]},beforeRightClick:{type:Function,default:null},rightMenuList:{type:Array},filterFn:{type:Function,default:null},highlight:{type:[Boolean,String],default:!1},expandOnSearch:_.bool.def(!1),checkOnSearch:_.bool.def(!1),selectedOnSearch:_.bool.def(!1)};function lr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!vn(e)}var vr=ae({name:"BasicTree",inheritAttrs:!1,props:cr,emits:["update:expandedKeys","update:selectedKeys","update:value","change","check","update:searchValue"],setup(e,{attrs:t,slots:n,emit:r,expose:a}){const s=He({checkStrictly:e.checkStrictly,expandedKeys:e.expandedKeys||[],selectedKeys:e.selectedKeys||[],checkedKeys:e.checkedKeys||[]}),i=He({startSearch:!1,searchText:"",searchData:[]}),y=dt([]),[m]=bn(),{prefixCls:p}=dn("basic-tree"),c=z(()=>{const{replaceFields:d}=e;return N({children:"children",title:"title",key:"key"},d)}),o=z(()=>{let d=Z(N(N({blockNode:!0},t),e),{expandedKeys:s.expandedKeys,selectedKeys:s.selectedKeys,checkedKeys:s.checkedKeys,checkStrictly:s.checkStrictly,replaceFields:x(c),"onUpdate:expandedKeys":O=>{s.expandedKeys=O,r("update:expandedKeys",O)},"onUpdate:selectedKeys":O=>{s.selectedKeys=O,r("update:selectedKeys",O)},onCheck:(O,K)=>{let T=J(s.checkedKeys);if(un(T)&&i.startSearch){const{key:A}=x(c);T=Yn(T,R(K.node.$attrs.node[A])),K.checked&&T.push(K.node.$attrs.node[A]),s.checkedKeys=T}else s.checkedKeys=O;const k=J(s.checkedKeys);r("update:value",k),r("check",k,K)},onRightClick:kt});return Ve(d,"treeData","class")}),u=z(()=>i.startSearch?i.searchData:x(y)),f=z(()=>!u.value||u.value.length===0),{deleteNodeByKey:v,insertNodeByKey:h,insertNodesByKey:g,filterByLevel:S,updateNodeByKey:w,getAllKeys:ce,getChildrenKeys:R,getEnabledKeys:gt}=sr(y,c);function bt(d,O){return!O&&e.renderIcon&&fe(e.renderIcon)?e.renderIcon(d):O}function kt(K){return Ne(this,arguments,function*({event:d,node:O}){var F;const{rightMenuList:T=[],beforeRightClick:k}=e;let A={event:d,items:[]};if(k&&fe(k)){let C=yield k(O,d);Array.isArray(C)?A.items=C:Object.assign(A,C)}else A.items=T;!((F=A.items)!=null&&F.length)||m(A)})}function Y(d){s.expandedKeys=d}function xt(){return s.expandedKeys}function Te(d){s.selectedKeys=d}function St(){return s.selectedKeys}function Ee(d){s.checkedKeys=d}function Ot(){return s.checkedKeys}function _e(d){s.checkedKeys=d?gt():[]}function le(d){s.expandedKeys=d?ce():[]}function Kt(d){s.checkStrictly=d}q(()=>e.searchValue,d=>{d!==i.searchText&&(i.searchText=d)},{immediate:!0}),q(()=>e.treeData,d=>{d&&ie(i.searchText)});function ie(d){if(d!==i.searchText&&(i.searchText=d),r("update:searchValue",d),!d){i.startSearch=!1;return}const{filterFn:O,checkable:K,expandOnSearch:T,checkOnSearch:k,selectedOnSearch:A}=x(e);i.startSearch=!0;const{title:F,key:C}=x(c),I=[];if(i.searchData=fn(x(y),P=>{var B,H;const j=O?O(d,P,x(c)):(H=(B=P[F])==null?void 0:B.includes(d))!=null?H:!1;return j&&I.push(P[C]),j},x(c)),T){const P=hn(i.searchData).map(j=>j[C]);P&&P.length&&Y(P)}k&&K&&I.length&&Ee(I),A&&I.length&&Te(I)}function Tt(d,O){if(!(!e.clickRowToExpand||!O||O.length===0))if(!s.expandedKeys.includes(d))Y([...s.expandedKeys,d]);else{const K=[...s.expandedKeys],T=K.findIndex(k=>k===d);T!==-1&&K.splice(T,1),Y(K)}}Q(()=>{y.value=e.treeData}),yn(()=>{const d=parseInt(e.defaultExpandLevel);d>0?s.expandedKeys=S(d):e.defaultExpandAll&&le(!0)}),Q(()=>{s.expandedKeys=e.expandedKeys}),Q(()=>{s.selectedKeys=e.selectedKeys}),Q(()=>{s.checkedKeys=e.checkedKeys}),q(()=>e.value,()=>{s.checkedKeys=J(e.value||[])}),q(()=>s.checkedKeys,()=>{const d=J(s.checkedKeys);r("update:value",d),r("change",d)}),Q(()=>{s.checkStrictly=e.checkStrictly}),a({setExpandedKeys:Y,getExpandedKeys:xt,setSelectedKeys:Te,getSelectedKeys:St,setCheckedKeys:Ee,getCheckedKeys:Ot,insertNodeByKey:h,insertNodesByKey:g,deleteNodeByKey:v,updateNodeByKey:w,checkAll:_e,expandAll:le,filterByLevel:d=>{s.expandedKeys=S(d)},setSearchValue:d=>{ie(d)},getSearchValue:()=>i.searchText});function Et(d){const{actionList:O}=e;if(!(!O||O.length===0))return O.map((K,T)=>{var A;let k=!0;return fe(K.show)?k=(A=K.show)==null?void 0:A.call(K,d):We(K.show)&&(k=K.show),k?b("span",{key:T,class:`${p}__action`},[K.render(d)]):null})}function Ae({data:d,level:O}){if(!d)return null;const K=i.searchText,{highlight:T}=x(e);return d.map(k=>{var we;const{title:A,key:F,children:C}=x(c),I=Ve(k,"title"),P=bt(Z(N({},k),{level:O}),k.icon),j=he(k,C)||[],B=he(k,A),H=K?B.indexOf(K):-1,_t=i.startSearch&&!mn(K)&&T&&H!==-1,At=`color: ${We(T)?"#f50":T}`,wt=_t?b("span",{class:(we=x(o))!=null&&we.blockNode?`${p}__content`:""},[b("span",null,[B.substr(0,H)]),b("span",{style:At},[K]),b("span",null,[B.substr(H+K.length)])]):B;return b($.TreeNode,Re(I,{node:J(k),key:he(k,F)}),{title:()=>{var Ce,$e;return b("span",{class:`${p}-title pl-2`,onClick:Tt.bind(null,k[F],k[C])},[(Ce=k.slots)!=null&&Ce.title?gn(n,($e=k.slots)==null?void 0:$e.title,k):b(me,null,[P&&b(Zn,{icon:P},null),wt,b("span",{class:`${p}__actions`},[Et(Z(N({},k),{level:O}))])])])},default:()=>Ae({data:j,level:O+1})})})}return()=>{let d;const{title:O,helpMessage:K,toolbar:T,search:k,checkable:A}=e,F=O||T||k||n.headerTitle,C={height:"calc(100% - 38px)"};return b("div",{class:[p,"h-full",t.class]},[F&&b(ar,{checkable:A,checkAll:_e,expandAll:le,title:O,search:k,toolbar:T,helpMessage:K,onStrictlyChange:Kt,onSearch:ie,searchText:i.searchText},lr(d=ze(n))?d:{default:()=>[d]}),qe(b(pn,{style:C},{default:()=>[b($,Re(x(o),{showIcon:!1}),N({default:()=>Ae({data:x(u),level:1})},ze(n)))]}),[[Ue,!x(f)]]),qe(b(Ge,{image:Ge.PRESENTED_IMAGE_SIMPLE,class:"!mt-4"},null),[[Ue,x(f)]])])}}});export{vr as _};
