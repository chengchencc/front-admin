var w=Object.defineProperty,I=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable;var B=(o,t,e)=>t in o?w(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,d=(o,t)=>{for(var e in t||(t={}))E.call(t,e)&&B(o,e,t[e]);if(f)for(var e of f(t))y.call(t,e)&&B(o,e,t[e]);return o},g=(o,t)=>I(o,C(t));var p=(o,t,e)=>new Promise((i,u)=>{var c=a=>{try{n(e.next(a))}catch(r){u(r)}},l=a=>{try{n(e.throw(a))}catch(r){u(r)}},n=a=>a.done?i(a.value):Promise.resolve(a.value).then(c,l);n((e=e.apply(o,t)).next())});import{B as S,b as k}from"./index.9784102a.js";import{B as N}from"./BasicForm.98ef7450.js";import{u as O}from"./useForm.2169bbec.js";import{au as P,a as $,w as F,j as m,f as x,aw as b,o as R,k as T,B as j,p as D,ax as L}from"./index.91c78518.js";const _={},K="\u5546\u54C1\u7C7B\u522B",Q=[{title:"\u540D\u79F0",dataIndex:"name",width:120},{title:"\u6392\u5E8F\u53F7",dataIndex:"sortNo",width:120},{title:"\u5907\u6CE8",dataIndex:"description"}],X=[{field:"type",label:"\u7C7B\u578B",component:"Input",colProps:{span:8}},{field:"name",label:"\u540D\u79F0",component:"Input",colProps:{span:8}}],U=[{field:"name",label:"\u540D\u79F0",component:"Input",required:!0},{field:"sortNo",label:"\u5E8F\u53F7",component:"InputNumber",required:!0},{label:"\u5907\u6CE8",field:"description",component:"InputTextArea"}],q=$({name:"EditModal",components:{BasicModal:S,BasicForm:N},emits:["success","register"],setup(o,{emit:t}){const e=F(!0),i=F(""),[u,{setFieldsValue:c,resetFields:l,validate:n}]=O({labelWidth:100,schemas:U,showActionButtonGroup:!1,actionColOptions:{span:23}}),[a,{setModalProps:r,closeModal:h}]=k(s=>p(this,null,function*(){l(),r({confirmLoading:!1}),e.value=!!(s!=null&&s.isUpdate),m(e)&&(i.value=s.record.id,c(d({},s.record)))})),M=x(()=>m(e)?"\u7F16\u8F91\u5B57\u5178\u9879":"\u65B0\u589E\u5B57\u5178\u9879");function v(){return p(this,null,function*(){try{let s=yield n();r({confirmLoading:!0}),e.value?s=yield _.update(s):s=yield _.insert(s),console.log(s),h(),t("success",{isUpdate:m(e),values:g(d({},s),{id:i.value})})}finally{r({confirmLoading:!1})}})}return{registerModal:a,registerForm:u,getTitle:M,handleSubmit:v}}});function A(o,t,e,i,u,c){const l=b("BasicForm"),n=b("BasicModal");return R(),T(n,L(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:j(()=>[D(l,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var V=P(q,[["render",A]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:V},Symbol.toStringTag,{value:"Module"}));export{V as E,_ as a,Q as c,Y as e,K as l,X as s};
